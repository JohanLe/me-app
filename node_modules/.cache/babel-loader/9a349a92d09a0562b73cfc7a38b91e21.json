{"ast":null,"code":"import _classCallCheck from\"/Users/ledel/WebbServer/dbwebb-kurser/jsramverk/me/app/me-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ledel/WebbServer/dbwebb-kurser/jsramverk/me/app/me-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/ledel/WebbServer/dbwebb-kurser/jsramverk/me/app/me-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/ledel/WebbServer/dbwebb-kurser/jsramverk/me/app/me-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/ledel/WebbServer/dbwebb-kurser/jsramverk/me/app/me-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{HeaderReports}from'./Header.js';import Link from\"./Link\";var Report=/*#__PURE__*/function(_React$Component){_inherits(Report,_React$Component);function Report(props){var _this;_classCallCheck(this,Report);_this=_possibleConstructorReturn(this,_getPrototypeOf(Report).call(this,props));_this.getReport=function(){var kmom=_this.props.match.params.kmom;fetch(\"http://localhost:8333/reports/\"+kmom,{method:\"GET\",headers:{'Content-Type':'application/json','Accept':'application/json'}}).then(function(res){console.log(\"Success I guess\");return res.json();}).then(function(res){console.log(res);if(res.data){var jsonData=JSON.parse(res.data.text);_this.setState({report:jsonData});}else{var infoText=JSON.parse('[{\"question\":\"Press edit to add new report\"}]');_this.setState({report:infoText});}});};_this.state={report:[],kmom:_this.props.match.params.kmom};return _this;}_createClass(Report,[{key:\"componentDidMount\",value:function componentDidMount(){this.getReport();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps.match.params.kmom!==this.props.match.params.kmom){this.getReport();}}},{key:\"render\",value:function render(){var kmom=this.props.match.params.kmom;var editUrl=\"/reports/edit/\"+kmom;var questions=this.state.report;var QuestionsList=function QuestionsList(){return questions.map(function(question,index){return React.createElement(\"div\",{className:\"question\",key:index},React.createElement(\"p\",null,React.createElement(\"strong\",null,question.question)),React.createElement(\"p\",null,question.answer));});};return React.createElement(\"article\",{className:\"article\"},React.createElement(\"div\",{className:\"article_header\"},React.createElement(\"h2\",null,\"REPORTS\"),React.createElement(HeaderReports,null),React.createElement(Link,{url:editUrl,text:\"Edit report\",className:\"report_week_link\"})),React.createElement(\"div\",{className:\"article_main_content\"},React.createElement(QuestionsList,null)));}}]);return Report;}(React.Component);export default Report;","map":{"version":3,"sources":["/Users/ledel/WebbServer/dbwebb-kurser/jsramverk/me/app/me-app/src/js/components/Report.js"],"names":["React","HeaderReports","Link","Report","props","getReport","kmom","match","params","fetch","method","headers","then","res","console","log","json","data","jsonData","JSON","parse","text","setState","report","infoText","state","prevProps","editUrl","questions","QuestionsList","map","question","index","answer","Component"],"mappings":"k5BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,aAAR,KAA4B,aAA5B,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,C,GAGMC,CAAAA,M,4EACF,gBAAYC,KAAZ,CAAkB,wCACd,wEAAMA,KAAN,GADc,MAQlBC,SARkB,CAQN,UAAM,CACd,GAAIC,CAAAA,IAAI,CAAG,MAAKF,KAAL,CAAWG,KAAX,CAAiBC,MAAjB,CAAwBF,IAAnC,CACAG,KAAK,CAAC,iCAAmCH,IAApC,CAA0C,CAC3CI,MAAM,CAAE,KADmC,CAE3CC,OAAO,CAAG,CACN,eAAgB,kBADV,CAEN,SAAU,kBAFJ,CAFiC,CAA1C,CAAL,CAOCC,IAPD,CAOM,SAACC,GAAD,CAAS,CACXC,OAAO,CAACC,GAAR,CAAY,iBAAZ,EACA,MAAOF,CAAAA,GAAG,CAACG,IAAJ,EAAP,CACH,CAVD,EAWCJ,IAXD,CAWM,SAACC,GAAD,CAAS,CACXC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACA,GAAGA,GAAG,CAACI,IAAP,CAAY,CACR,GAAIC,CAAAA,QAAQ,CAAGC,IAAI,CAACC,KAAL,CAAWP,GAAG,CAACI,IAAJ,CAASI,IAApB,CAAf,CACA,MAAKC,QAAL,CAAc,CAACC,MAAM,CAAEL,QAAT,CAAd,EACH,CAHD,IAII,CACA,GAAIM,CAAAA,QAAQ,CAAGL,IAAI,CAACC,KAAL,CAAW,+CAAX,CAAf,CACA,MAAKE,QAAL,CAAc,CAACC,MAAM,CAAEC,QAAT,CAAd,EAEH,CACJ,CAtBD,EAuBH,CAjCiB,CAEd,MAAKC,KAAL,CAAa,CACTF,MAAM,CAAE,EADC,CAETjB,IAAI,CAAE,MAAKF,KAAL,CAAWG,KAAX,CAAiBC,MAAjB,CAAwBF,IAFrB,CAAb,CAFc,aAOjB,C,gFA2BkB,CACf,KAAKD,SAAL,GACH,C,8DACkBqB,S,CAAW,CAE1B,GAAGA,SAAS,CAACnB,KAAV,CAAgBC,MAAhB,CAAuBF,IAAvB,GAAgC,KAAKF,KAAL,CAAWG,KAAX,CAAiBC,MAAjB,CAAwBF,IAA3D,CAAgE,CAC5D,KAAKD,SAAL,GACH,CAEJ,C,uCACQ,CAEL,GAAMC,CAAAA,IAAI,CAAG,KAAKF,KAAL,CAAWG,KAAX,CAAiBC,MAAjB,CAAwBF,IAArC,CACA,GAAMqB,CAAAA,OAAO,CAAG,iBAAiBrB,IAAjC,CACA,GAAIsB,CAAAA,SAAS,CAAG,KAAKH,KAAL,CAAWF,MAA3B,CAEA,GAAMM,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,SAClBD,CAAAA,SAAS,CAACE,GAAV,CAAc,SAACC,QAAD,CAAWC,KAAX,QACV,4BAAK,SAAS,CAAC,UAAf,CAA0B,GAAG,CAAEA,KAA/B,EACI,6BACI,kCAASD,QAAQ,CAACA,QAAlB,CADJ,CADJ,CAII,6BAAIA,QAAQ,CAACE,MAAb,CAJJ,CADU,EAAd,CADkB,EAAtB,CAUA,MACI,gCAAS,SAAS,CAAC,SAAnB,EACI,2BAAK,SAAS,CAAC,gBAAf,EACI,wCADJ,CAEI,oBAAC,aAAD,MAFJ,CAGI,oBAAC,IAAD,EAAM,GAAG,CAAEN,OAAX,CAAoB,IAAI,CAAC,aAAzB,CAAuC,SAAS,CAAC,kBAAjD,EAHJ,CADJ,CAOI,2BAAK,SAAS,CAAC,sBAAf,EACI,oBAAC,aAAD,MADJ,CAPJ,CADJ,CAcH,C,oBA3EgB3B,KAAK,CAACkC,S,EA+E3B,cAAe/B,CAAAA,MAAf","sourcesContent":["import React from 'react';\nimport {HeaderReports} from './Header.js';\nimport Link from \"./Link\";\n\n\nclass Report extends React.Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            report: [],\n            kmom: this.props.match.params.kmom,\n        }\n        \n    }\n    getReport = () => {\n        var kmom = this.props.match.params.kmom\n        fetch(\"http://localhost:8333/reports/\" + kmom, {\n            method: \"GET\",\n            headers : { \n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n               },\n        })\n        .then((res) => {\n            console.log(\"Success I guess\");\n            return res.json();\n        })\n        .then((res) => {\n            console.log(res);\n            if(res.data){\n                var jsonData = JSON.parse(res.data.text);\n                this.setState({report: jsonData});\n            }\n            else{\n                var infoText = JSON.parse('[{\"question\":\"Press edit to add new report\"}]');\n                this.setState({report: infoText});\n            \n            }\n        })\n    };\n    componentDidMount(){\n        this.getReport();\n    }\n    componentDidUpdate(prevProps) {\n        \n        if(prevProps.match.params.kmom !== this.props.match.params.kmom){\n            this.getReport();\n        }\n        \n    }\n    render() {\n        \n        const kmom = this.props.match.params.kmom;\n        const editUrl = \"/reports/edit/\"+kmom;\n        var questions = this.state.report;\n\n        const QuestionsList = () =>\n            questions.map((question, index) => (\n                <div className=\"question\" key={index}>\n                    <p>\n                        <strong>{question.question}</strong>\n                    </p>\n                    <p>{question.answer}</p>\n                </div>\n            ));\n\n        return (\n            <article className=\"article\">\n                <div className=\"article_header\">\n                    <h2>REPORTS</h2>\n                    <HeaderReports/>\n                    <Link url={editUrl} text=\"Edit report\" className=\"report_week_link\"/>\n                </div>\n\n                <div className=\"article_main_content\">\n                    <QuestionsList/>\n                </div>\n\n            </article>\n        )\n    }\n}\n\n\nexport default Report;"]},"metadata":{},"sourceType":"module"}